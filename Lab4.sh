#!/bin/bash

# 1. Ստեղծել ընդհանուր հիշողության 2 սեգմենտներ՝ 100KB և 200KB չափով
echo "===> Ստեղծում ենք ընդհանուր հիշողության սեգմենտներ..."
id1=$(ipcmk -M 102400 | awk '{print $NF}')
id2=$(ipcmk -M 204800 | awk '{print $NF}')

echo "Ստեղծված սեգմենտների ID-ներն են: $id1 և $id2"
echo

# 2. Ցուցադրել ստեղծված սեգմենտները
echo "===> Ստուգում ենք ստեղծված սեգմենտները..."
ipcs -m

# 3. Հուշում օգտվողին՝ ստուգելու /proc/<pid>/maps ֆայլը
echo
echo "===> Կարող եք ստուգել ձեր պրոցեսի maps ֆայլը՝ օրինակ՝ cat 
/proc/\$\$/maps"
echo "Սեղմեք Ctrl+Z դադարեցնելու համար..."
sleep 5

# 4. Ջնջել ստեղծված սեգմենտները
echo "===> Ջնջում ենք ստեղծված սեգմենտները..."
ipcrm -m $id1
ipcrm -m $id2
echo "Սեգմենտները ջնջվել են։"
echo

# 5. Ցուցադրել նորից՝ համոզվելու համար
echo "===> Ստուգում ենք մնացյալ սեգմենտները..."
ipcs -m

echo "✅ Առաջադրանքը ավարտված է։"

